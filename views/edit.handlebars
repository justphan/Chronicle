<!doctype html>

<html>
<head>
	<title>Edit Event</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="css/navbar.css" rel="stylesheet">
	<link href="css/addevent.css" rel="stylesheet">
	<!-- <link href="css/bootstrap.css" rel="stylesheet"> -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>

	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

  	<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  
  	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

  	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato|Lobster" rel="stylesheet">

	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384 -KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="js/burgermenu.js"> </script>


	  <script>
	  $( function() {
	    $( "#datepicker" ).datepicker();
	  } );

	  </script>
</head>

<body style="padding-top: 50px" class="text-center">

<div class="main">

<nav class="navbar fixed-top navbar-expand bg-faded navbar-light " id="navbar-header">
<div class="top navbar-override">
	<a href="#" class="menu_icon"><i id="hamburger-icon" class="material-icons">dehaze</i></a>
	<p id="title">Chronicle</p>
</div>
 
</nav>


<nav class="menu" id="hamburger-pullout">
		<a href="/calendar2" class="active item_menu" style="font-size:16px; font-family:Lato, cursive"><svg class="svg-inline--fa fa-calendar-alt fa-w-14" style="font-size: 16px; margin-right: 5px;" aria-hidden="true" data-prefix="fas" data-icon="calendar-alt" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M436 160H12c-6.6 0-12-5.4-12-12v-36c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48v36c0 6.6-5.4 12-12 12zM12 192h424c6.6 0 12 5.4 12 12v260c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V204c0-6.6 5.4-12 12-12zm116 204c0-6.6-5.4-12-12-12H76c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm0-128c0-6.6-5.4-12-12-12H76c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm128 128c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm0-128c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm128 128c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm0-128c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40z"></path></svg><!-- <i class="fas fa-calendar-alt" style="font-size: 16px; margin-right:5px;"></i> --> Calendar</a>
		<a href="/graph" class="item_menu" style="font-size:16px; font-family:Lato, cursive"><svg class="svg-inline--fa fa-chart-pie fa-w-18 item_menu" style="font-size: 16px; margin-right: 5px;" aria-hidden="true" data-prefix="fas" data-icon="chart-pie" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" data-fa-i2svg=""><path fill="currentColor" d="M288 12.3V240h227.7c6.9 0 12.3-5.8 12-12.7-6.4-122.4-104.5-220.6-227-227-6.9-.3-12.7 5.1-12.7 12zM552.7 288c6.9 0 12.3 5.8 12 12.7-2.8 53.2-23.2 105.6-61.2 147.8-4.6 5.1-12.6 5.4-17.5.5L325 288h227.7zM401 433c4.8 4.8 4.7 12.8-.4 17.3-42.6 38.4-99 61.7-160.8 61.7C107.6 511.9-.2 403.8 0 271.5.2 143.4 100.8 38.9 227.3 32.3c6.9-.4 12.7 5.1 12.7 12V272l161 161z"></path></svg><!-- <i class="fas fa-chart-pie  item_menu" style="font-size: 16px; margin-right:5px"></i> --> Your Activity</a>
		<a href="/settings" class="item_menu" style="font-size:16px; font-family:Lato, cursive"><svg class="svg-inline--fa fa-cog fa-w-16 item_menu" style="font-size: 16px; margin-right: 5px;" aria-hidden="true" data-prefix="fas" data-icon="cog" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"></path></svg><!-- <i class="fas fa-cog  item_menu" style="font-size: 16px; margin-right:5px"></i> --> Settings</a>
		<a href="/addevent" class="item_menu" style="font-size:16px; font-family:Lato, cursive"><svg class="svg-inline--fa fa-plus-square fa-w-14 item_menu" style="font-size: 16px; margin-right: 5px;" aria-hidden="true" data-prefix="fas" data-icon="plus-square" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"></path></svg><!-- <i class="fas fa-plus-square  item_menu" style="font-size: 16px; margin-right:5px"></i> --> Add Event</a>
</nav>

	<div class="wrapper">
		


<form id="editEventForm" class="form-group" role="form" method="get" action="/editEvent">
	
	<h3 style="font-family:Lobster, cursive; color:#464673">Edit Event</h3>
	
	<div class="input-group mb-3 input-group-lg"> 
		<input style="height:50px; font-size: large" class="form-control" type="text" name="name" id="taskname">
	</div>

	<div>
		<div class="input-group mb-3">
			<div class="input-group-prepend">
				<span style="height:50px; font-size: large" class="input-group-text">Date</span>
			</div>
			<input style="height:50px; font-size: large" type="date" class="form-control" name="date" id="taskdate" required>
		</div>

		<div class="form-group">
		<select style="height:50px; font-size: large" class="custom-select" name="category" id="taskcat" required>
			<option selected disabled="disabled" style="height:50px; font-size: large" value="">Select Category</option>
		</select>
		<div class="invalid-feedback">Please select a category!</div>
		</div>
	</div>	
<hr>
<div class="row">
	<div class="col-12 tip" style="text-align:left!important; color:#464673"  id="help-btn">
		<i class="fa fa-question-circle"></i>

		<span class="tiptext hidden" id="help-txt">Please Enter Time Format as HH:MM:PM<br>Ex. 10:00:AM
  		</span>
	</div>

	<div class="col-6">

	</div>
</div>


			<div class="input-group mb-3 input-group-sm">
				<div class="input-group-prepend">
					<span style="height:50px; font-size: large" class="input-group-text">Start Time</span>
				</div>
				<input style="height:50px; font-size: large" class="form-control" type="time" name="timestart" id="taskstart" required>
			</div>
	
	
			<div class="input-group mb-3 input-group-sm">
				<div class="input-group-prepend">
					<span style="height:50px; font-size: large" class="input-group-text">End Time</span>
				</div>
				<input style="height:50px; font-size: large" class="form-control" type="time" name="timeend" id="taskend" required>
			</div>
	

	<div>
		<input name="olddate" type="hidden" id="olddate"/>
		<input name="oldname" type="hidden" id="oldname"/>
		<input name="oldstart" type="hidden" id="oldstart"/>
		<input name="oldend" type="hidden" id="oldend"/>
		<input name="oldcat" type="hidden" id="oldcat"/>
	</div>
		<hr>
		
	<div class="middle-bttn">


					<div class="cancel">
						<a href="/calendar2" class="btn btn-lg bad-btn" style="font-size: large">Cancel</a>
					</div>
					<div class="save">
						<button class="btn btn-lg btn-primary btn-block" style="font-size: large" type="submit">Save</button>
					</div>
				
	</div>
</form>

</div>
</div>
	
<!--  -->

	<script>
		var decodedJson = decodeURIComponent("{{{encodedJson}}}");
		var obj = JSON.parse(decodedJson);
		var cats = obj.categories;
		var eve = obj.eve;
		console.log(obj);
		/*
		document.getElementById("taskname").defaultValue = eve.name;
		document.getElementById("taskstart").defaultValue = eve.timestart;
		document.getElementById("taskend").defaultValue = eve.timeend;
		*/
		document.getElementById("taskname").value = eve.name;
		document.getElementById("oldname").value = eve.name;
		var timestart = eve.timestart.substring(0,4);
		var timeend = eve.timeend.substring(0,4);
		if(timestart.charAt(0) != '0')
			timestart = '0'+timestart;
		if(timeend.charAt(0) != '0')
			timeend = '0'+timeend;
		if(eve.timestart.includes("pm")) {
			if(timestart.substring(0,2) != '12')
				timestart = (parseInt(timestart.substring(0,2))+12).toString() + timestart.substring(2);
		}

		if(eve.timeend.includes("pm")) {
			if(timeend.substring(0,2) != '12')
				timeend = (parseInt(timeend.substring(0,2))+12).toString() + timeend.substring(2);
		}
	

		document.getElementById("taskstart").defaultValue = timestart;
		document.getElementById("taskend").defaultValue = timeend;
		document.getElementById("oldstart").value = timestart;
		document.getElementById("oldend").value = timeend;


		var mm = eve.month;
		if(mm<10)
			mm='0'+mm;
		var dd = eve.day;
		if(dd<10)
			dd='0'+dd;
		var date = eve.year + '-' + mm + '-' + dd;
		document.getElementById("taskdate").defaultValue = eve.date;
		document.getElementById("olddate").value = eve.date;
		var mySelect = document.getElementById("taskcat");
		for (var x = 0; x < cats.length; x++) {
			var opt = document.createElement('option');
			opt.value = cats[x].name;
			opt.innerHTML = cats[x].name;
			if(cats[x].name == eve.category.name)
				opt.selected = "selected";
			mySelect.appendChild(opt);
		}
		
		document.getElementById("oldcat").value = eve.category.name;

		$("#help-btn").click(function(event){
			document.getElementById("help-txt").classList.toggle("hidden");
		})

		$("#taskstart").focus(function(event){
			document.getElementById("help-txt").classList.remove("hidden");
		})

		$("#taskend").focus(function(event){
			document.getElementById("help-txt").classList.remove("hidden");
		})
	</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
	<script>

	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-115181899-1', 'auto');
		ga('send', 'pageview');
	</script>
</body>

</html>